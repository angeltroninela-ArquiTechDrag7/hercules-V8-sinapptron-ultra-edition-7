<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HÉRCULES V8.0 | AUDITORÍA FORENSE</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-bg': '#020409',
              'brand-surface': '#0A0F1A',
              'brand-line': '#1E293B',
              'brand-primary': '#00E5FF',
              'gold': '#D4AF37',
              'danger': '#FF4444',
            },
            fontFamily: {
              mono: ['"Courier New"', 'Courier', 'monospace'],
            },
            animation: {
              'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            }
          },
        },
      };
    </script>

    <style>
      body {
        background-color: #020409;
        color: #94A3B8;
        font-family: 'Courier New', monospace;
        background-image:
          radial-gradient(ellipse 80% 80% at 50% -20%, rgba(0, 229, 255, 0.1), transparent),
          linear-gradient(to right, rgba(30, 41, 59, 0.5) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(30, 41, 59, 0.5) 1px, transparent 1px);
        background-size: 100% 100%, 3rem 3rem, 3rem 3rem;
      }
      
      .cyber-panel {
        position: relative;
        border: 1px solid #1E293B;
        background-color: rgba(10, 15, 26, 0.9);
        backdrop-filter: blur(5px);
        box-shadow: 0 0 25px rgba(0,0,0,0.5);
      }
      .cyber-panel::before {
          content: ''; position: absolute; top: -1px; left: -1px; width: 12px; height: 12px;
          border-top: 2px solid #00E5FF; border-left: 2px solid #00E5FF;
      }
      .cyber-panel::after {
          content: ''; position: absolute; bottom: -1px; right: -1px; width: 12px; height: 12px;
          border-bottom: 2px solid #00E5FF; border-right: 2px solid #00E5FF;
      }
      
      input {
          background: #05080F; border: 1px solid #1E293B; color: #00E5FF;
          padding: 10px; width: 100%; font-family: 'Courier New';
      }
      input:focus { outline: none; border-color: #00E5FF; box-shadow: 0 0 10px rgba(0,229,255,0.2); }
      
      .btn-audit {
          background: linear-gradient(45deg, #D4AF37, #FDB931);
          color: black; font-weight: bold; text-transform: uppercase;
          border: none; cursor: pointer; transition: all 0.3s;
      }
      .btn-audit:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(212, 175, 55, 0.5); }
    </style>
</head>
<body class="min-h-screen p-4 flex flex-col items-center">

    <header class="w-full max-w-4xl mb-8 flex justify-between items-center border-b border-brand-line pb-4">
        <div>
            <h1 class="text-3xl text-gold font-bold tracking-widest">HÉRCULES V8.0</h1>
            <p class="text-xs text-brand-primary tracking-[0.3em]">SISTEMA DE AUDITORÍA FORENSE</p>
        </div>
        <div class="text-right text-xs text-gray-500">
            <p>TEMP: 0.0</p>
            <p>ESTADO: ACTIVO</p>
        </div>
    </header>

    <main class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8">
        
        <div class="cyber-panel p-6 rounded">
            <h2 class="text-brand-primary mb-4 text-sm border-l-4 border-brand-primary pl-2">1. INYECCIÓN DE DATOS</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs text-gray-400 mb-1">INGRESOS MENSUALES ($)</label>
                    <input type="number" id="income" placeholder="Ej: 25000">
                </div>
                <div>
                    <label class="block text-xs text-gray-400 mb-1">GASTOS OPERATIVOS ($)</label>
                    <input type="number" id="expenses" placeholder="Ej: 18000">
                </div>
                <div>
                    <label class="block text-xs text-gray-400 mb-1">CAPITAL EN CAJA ($)</label>
                    <input type="number" id="cash" placeholder="Ej: 5000">
                </div>
                <div>
                    <label class="block text-xs text-gray-400 mb-1">DEUDA CORTO PLAZO ($)</label>
                    <input type="number" id="debt" placeholder="Ej: 10000">
                </div>
                
                <button onclick="ejecutarAuditoria()" class="btn-audit w-full py-4 mt-6 clip-path-polygon">
                    EJECUTAR PROTOCOLO
                </button>
            </div>
        </div>

        <div class="cyber-panel p-6 rounded flex flex-col justify-center items-center relative min-h-[400px]">
            <div id="loading" class="hidden absolute inset-0 bg-brand-bg bg-opacity-90 flex items-center justify-center z-10">
                <p class="text-brand-primary animate-pulse">PROCESANDO LÓGICA...</p>
            </div>
            
            <div id="intro-msg" class="text-center">
                <p class="text-gray-600 mb-2">ESPERANDO DATOS...</p>
                <div class="w-16 h-1 bg-brand-line mx-auto"></div>
            </div>

            <div id="results-area" class="hidden w-full h-full">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-gold text-lg font-bold">REPORTE FINAL</h3>
                    <span id="status-badge" class="px-2 py-1 text-xs bg-gray-800 text-white border border-gray-600">PENDIENTE</span>
                </div>

                <div class="h-48 w-full mb-4">
                    <canvas id="financeChart"></canvas>
                </div>

                <div class="grid grid-cols-2 gap-2 text-xs mb-4">
                    <div class="bg-black p-2 border border-brand-line">
                        <p class="text-gray-500">FLUJO NETO</p>
                        <p id="val-flow" class="text-lg font-bold text-white">---</p>
                    </div>
                    <div class="bg-black p-2 border border-brand-line">
                        <p class="text-gray-500">RUNWAY (DÍAS)</p>
                        <p id="val-runway" class="text-lg font-bold text-white">---</p>
                    </div>
                </div>

                <div class="mt-auto border-t border-brand-line pt-2">
                    <p class="text-[10px] text-gray-600 mb-1">SELLO DE INTEGRIDAD (SHA-256):</p>
                    <p id="hash-output" class="text-[10px] text-brand-primary break-all font-mono leading-tight">---</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-12 text-center text-[10px] text-gray-700">
        <p>ARQUITECTURA DETERMINISTA V8.0 | DESIGN BY RICHARD F. URBINA</p>
        <p>POWERED BY GEMINI PRO ENGINE & CHART.JS</p>
    </footer>

    <script>
        async function ejecutarAuditoria() {
            // UI Effects
            document.getElementById('intro-msg').style.display = 'none';
            document.getElementById('loading').style.display = 'flex';
            
            // Simular proceso de cálculo (para efecto dramático)
            await new Promise(r => setTimeout(r, 800));

            // 1. Obtener Datos
            const income = parseFloat(document.getElementById('income').value) || 0;
            const expenses = parseFloat(document.getElementById('expenses').value) || 0;
            const cash = parseFloat(document.getElementById('cash').value) || 0;
            const debt = parseFloat(document.getElementById('debt').value) || 0;

            // 2. Cálculo Lógico (Determinista)
            const netFlow = income - expenses;
            let daysToZero = 9999;
            let status = "SOLVENTE";
            let color = "#D4AF37"; // Gold

            if (netFlow < 0) {
                const burn = Math.abs(netFlow);
                daysToZero = Math.floor((cash / burn) * 30);
                status = "CRÍTICO";
                color = "#FF4444"; // Red
            }

            // 3. Renderizar Textos
            document.getElementById('val-flow').innerText = `$${netFlow.toLocaleString()}`;
            document.getElementById('val-flow').style.color = netFlow >= 0 ? '#00FF00' : '#FF4444';
            
            document.getElementById('val-runway').innerText = daysToZero > 3000 ? "∞ INFINITO" : `${daysToZero} DÍAS`;
            
            const badge = document.getElementById('status-badge');
            badge.innerText = status;
            badge.style.borderColor = color;
            badge.style.color = color;

            // 4. Gráfica (Chart.js)
            const ctx = document.getElementById('financeChart').getContext('2d');
            
            // Datos de proyección
            const labels = ['Hoy', 'Mes 1', 'Mes 2', 'Mes 3', 'Mes 4', 'Mes 5'];
            const data = [];
            for(let i=0; i<6; i++) data.push(cash + (netFlow * i));

            if(window.myAuditChart) window.myAuditChart.destroy();

            window.myAuditChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Proyección de Caja',
                        data: data,
                        borderColor: color,
                        backgroundColor: color + '20', // Transparente
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: '#333' }, ticks: { color: '#666' } },
                        x: { grid: { color: '#333' }, ticks: { color: '#666' } }
                    }
                }
            });

            // 5. Generar Hash Cuántico (SHA-256)
            const rawData = `HERCULES|${income}|${expenses}|${debt}|${new Date().toISOString()}`;
            const msgBuffer = new TextEncoder().encode(rawData);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            
            document.getElementById('hash-output').innerText = hashHex;

            // Mostrar resultados
            document.getElementById('loading').style.display = 'none';
            document.getElementById('results-area').classList.remove('hidden');
        }
    </script>
</body>
</html>
